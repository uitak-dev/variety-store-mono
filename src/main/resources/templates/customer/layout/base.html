<html xmlns:th="http://www.thymeleaf.org">

<head th:fragment="common_head(title, link, style)">

    <title th:replace="${title}">페이지 제목</title>

    <!-- 공통 -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Bootstrap CSS -->
    <link href="/public/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/public/css/common.css">

    <script src="/public/js/bootstrap.bundle.min.js"></script>
    <script src="/public/js/jquery-3.7.1.slim.min.js"></script>
    <script src="/public/js/common.js"></script>

    <!-- 추가 link -->
    <th:block th:if="${link != null}">
        <th:block th:replace="${link}"></th:block>
    </th:block>

    <!-- 추가 style -->
    <th:block th:if="${style != null}">
        <th:block th:replace="${style}"></th:block>
    </th:block>
</head>

<!-- 헤더 -->
<header th:fragment="common_header">
    <div class="container">
        <!-- 로고 / 타이틀 -->
        <h1>Variety Store</h1>

        <!-- 네비게이션 -->
        <nav>
            <ul>
                <li><a class="active" th:href="@{/public/home}">홈</a></li>
                <li th:if="${isAuthenticated}">
                    <a th:href="@{/customer/carts}">장바구니</a>
                </li>
                <li th:if="${isAuthenticated}">
                    <a th:href="@{/customer/users/{userId}(userId=${userId})}">내정보</a>
                </li>
            </ul>
        </nav>

        <!-- 로그인 상태 표시 -->
        <div class="auth-info">
            <div th:if="${isAuthenticated}">
                <p>환영합니다, <span th:text="${userName}"></span>님!</p>
                <a th:href="@{/auth/logout}" class="btn btn-outline-danger btn-sm">로그아웃</a>
            </div>
            <div th:unless="${isAuthenticated}">
                <a th:href="@{/auth/customer/login}" class="btn btn-primary btn-sm">로그인</a>
            </div>
        </div>
    </div>
</header>

<!-- 좌측 사이드바 -->
<aside th:fragment="common_aside">
    <div class="tree-menu">
        <h2>카테고리</h2>
        <ul id="category-tree">
            <!-- 카테고리 목록 동적 생성 -->
        </ul>
    </div>
</aside>

<!-- 푸터 -->
<footer th:fragment="common_footer" class="py-3 mt-4">
    <div class="container text-center">
        <p class="mb-0 text-secondary">&copy; 2025 Customer Site, Inc</p>
    </div>
</footer>

</html>